<!DOCTYPE html>
<html>
<head>
    <title>Font Debug</title>
    <link rel="stylesheet" href="/css/all.min.css">
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #1e1e1e; 
            color: white; 
        }
        .test-section { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #444; 
            border-radius: 5px; 
        }
        .icon-test { 
            margin: 10px 0; 
            font-size: 20px; 
        }
        .icon-test i { 
            margin-right: 10px; 
            color: #47a864; 
            width: 30px;
            display: inline-block;
        }
        .error { color: #ff6b6b; }
        .success { color: #51cf66; }
        #fontStatus { margin: 10px 0; }
        .debug-info { 
            background: #2d2d2d; 
            padding: 10px; 
            border-radius: 3px; 
            font-family: monospace; 
        }
    </style>
</head>
<body>
    <h1>Font Awesome Debug Page</h1>
    
    <div class="test-section">
        <h2>Font Loading Status</h2>
        <div id="fontStatus">Checking font loading...</div>
        <div class="debug-info">
            <div>CSS Path: /css/all.min.css</div>
            <div>Font Path: /webfonts/fa-solid-900.woff2</div>
            <div>User Agent: <span id="userAgent"></span></div>
        </div>
    </div>

    <div class="test-section">
        <h2>Icon Tests</h2>
        <div class="icon-test"><i class="fa fa-tachometer"></i>Dashboard (should show speedometer)</div>
        <div class="icon-test"><i class="fa fa-balance-scale"></i>Calibration (should show scales)</div>
        <div class="icon-test"><i class="fa fa-cogs"></i>Settings (should show gears)</div>
        <div class="icon-test"><i class="fa fa-upload"></i>Updates (should show upload arrow)</div>
        <div class="icon-test"><i class="fa fa-home"></i>Home (should show house)</div>
        <div class="icon-test"><i class="fa fa-wifi"></i>WiFi (should show wifi bars)</div>
        <div class="icon-test"><i class="fa fa-check"></i>Check (should show checkmark)</div>
        <div class="icon-test"><i class="fa fa-times"></i>Times (should show X)</div>
    </div>

    <div class="test-section">
        <h2>Raw Unicode Tests</h2>
        <div style="font-family: 'Font Awesome 6 Free'; font-weight: 900;">
            <div>Dashboard: &#xf625;</div>
            <div>Scale: &#xf24e;</div>
            <div>Cogs: &#xf085;</div>
            <div>Upload: &#xf093;</div>
        </div>
    </div>

    <script>
        document.getElementById('userAgent').textContent = navigator.userAgent;
        
        // Check if fonts are loaded
        function checkFontLoading() {
            const testElement = document.createElement('span');
            testElement.style.fontFamily = '"Font Awesome 6 Free"';
            testElement.style.fontWeight = '900';
            testElement.innerHTML = '&#xf625;';
            testElement.style.visibility = 'hidden';
            document.body.appendChild(testElement);
            
            setTimeout(() => {
                const computed = window.getComputedStyle(testElement);
                const fontFamily = computed.fontFamily;
                
                const statusEl = document.getElementById('fontStatus');
                if (fontFamily.includes('Font Awesome')) {
                    statusEl.innerHTML = '<span class="success">✓ Font Awesome 6 Free loaded successfully!</span>';
                } else {
                    statusEl.innerHTML = '<span class="error">✗ Font Awesome 6 Free failed to load. Using fallback: ' + fontFamily + '</span>';
                }
                
                document.body.removeChild(testElement);
            }, 1000);
        }
        
        // Test CSS loading
        function testCSSLoading() {
            fetch('/css/all.min.css')
                .then(response => {
                    if (response.ok) {
                        console.log('CSS loaded successfully');
                        return response.text();
                    } else {
                        console.error('CSS failed to load:', response.status);
                    }
                })
                .then(css => {
                    if (css && css.includes('Font Awesome')) {
                        console.log('CSS contains Font Awesome definitions');
                    } else {
                        console.error('CSS does not contain expected Font Awesome content');
                    }
                })
                .catch(err => {
                    console.error('CSS loading error:', err);
                });
        }
        
        // Test font file loading
        function testFontLoading() {
            fetch('/webfonts/fa-solid-900.woff2')
                .then(response => {
                    if (response.ok) {
                        console.log('Font file loaded successfully, size:', response.headers.get('content-length'));
                    } else {
                        console.error('Font file failed to load:', response.status);
                    }
                })
                .catch(err => {
                    console.error('Font loading error:', err);
                });
        }
        
        window.addEventListener('load', () => {
            checkFontLoading();
            testCSSLoading();
            testFontLoading();
        });
    </script>
</body>
</html>
